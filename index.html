<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>ДЕЛО №13-82: УТЕЧКА | ОЛЬГА КОВАЛЬЧУК</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Merriweather:ital,wght@0,300;0,700;1,300&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0908;
      --paper: #e3dcd2;
      --paper-dark: #d6cfc2;
      --ink: #2b221b;
      --accent: #b42b2b;
      --safe: #2a7a4b;
      --highlight: #d9a029;
      --ui-font: 'JetBrains Mono', monospace;
      --read-font: 'Merriweather', serif;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      background: var(--bg);
      margin: 0; padding: 0;
      color: var(--ink);
      font-family: var(--read-font);
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }

    /* ФОНОВЫЙ ШУМ */
    .noise-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)" opacity="0.08"/%3E%3C/svg%3E');
      pointer-events: none; z-index: 0;
    }

    /* ТАЙМЕР */
    .timer-bar { position: fixed; top: 0; left: 0; right: 0; height: 6px; background: #333; z-index: 100; transition: background 0.5s; }
    .timer-fill { height: 100%; background: var(--accent); width: 100%; transition: width 1s linear; box-shadow: 0 0 10px var(--accent); }
    .timer-text { position: fixed; top: 10px; right: 10px; background: #000; color: var(--accent); padding: 4px 8px; font-family: var(--ui-font); font-size: 14px; border: 1px solid var(--accent); border-radius: 4px; z-index: 101; font-weight: bold; transition: color 0.5s, border-color 0.5s; }

    /* ДЕЛО */
    .case-file {
      position: relative; width: 100%; max-width: 720px;
      background: var(--paper);
      margin: 40px 10px 80px; padding: 0;
      box-shadow: 0 0 50px rgba(0,0,0,0.8);
      z-index: 1; min-height: 90vh;
      display: flex; flex-direction: column;
    }
    .case-file::before {
      content: ""; position: absolute; top: 0; bottom: 0; left: 0; width: 24px;
      background: linear-gradient(90deg, rgba(0,0,0,0.1), transparent);
      border-left: 2px solid rgba(0,0,0,0.2);
    }

    .header-stamp { padding: 30px 20px 20px; border-bottom: 2px solid var(--ink); text-align: center; position: relative; }
    .header-stamp h1 { font-family: var(--ui-font); font-size: 1.8rem; margin: 0; letter-spacing: -1px; line-height: 1.1; }
    .header-stamp .sub { font-size: 0.8rem; opacity: 0.7; margin-top: 5px; font-family: var(--ui-font); }
    .top-secret { position: absolute; top: 20px; right: 20px; border: 3px solid var(--accent); color: var(--accent); padding: 4px 8px; font-weight: bold; font-family: var(--ui-font); transform: rotate(15deg); opacity: 0.8; font-size: 0.9rem; }

    /* СЕКЦИИ */
    .section { padding: 20px 25px; border-bottom: 1px dashed rgba(0,0,0,0.2); display: none; opacity: 0; transition: opacity 0.5s ease-in; }
    .section.active { display: block; opacity: 1; }

    h2 { font-family: var(--ui-font); font-size: 1.1rem; text-transform: uppercase; margin-top: 20px; border-left: 4px solid var(--ink); padding-left: 10px; background: rgba(0,0,0,0.05); padding-top: 5px; padding-bottom: 5px; }
    p { line-height: 1.6; margin-bottom: 16px; font-size: 1rem; }
    ul { margin: 10px 0 20px 20px; padding: 0; }
    li { margin-bottom: 8px; }

    /* ПЕРСОНАЖИ */
    .suspects-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 20px; }
    .suspect-card { background: var(--paper-dark); padding: 10px; border: 1px solid rgba(0,0,0,0.2); text-align: left; font-size: 0.85rem; }
    .suspect-card img { width: 100%; height: auto; display: block; filter: none; margin-bottom: 10px; border-bottom: 1px solid rgba(0,0,0,0.1); }
    .sus-role { font-family: var(--ui-font); color: var(--accent); font-weight: bold; font-size: 0.8rem; text-transform: uppercase; margin-bottom: 5px; }
    .sus-bio { font-size: 0.75rem; color: #555; line-height: 1.4; margin-top: 5px; border-top: 1px dotted #999; padding-top: 5px;}

    /* СТОЛ */
    .desk-view { position: relative; margin: 10px -10px; border: 4px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.3); overflow: hidden; }
    .desk-view img { display: block; width: 100%; filter: sepia(0.2) contrast(1.1); }

    .hotspot { position: absolute; cursor: pointer; background: rgba(0,0,0,0); border: none; outline: none; }
    .hotspot:hover::after { content: "ОСМОТРЕТЬ"; position: absolute; top: -25px; left: 0; background: rgba(0,0,0,0.8); color: #fff; padding: 2px 6px; font-size: 0.7rem; font-family: var(--ui-font); border-radius: 4px; pointer-events: none; white-space: nowrap; z-index: 10; }
    .hotspot.found { cursor: default; }
    .hotspot.found:hover::after { display: none; }

    .clues-grid { display: grid; gap: 10px; margin-top: 15px; }
    .clue-box { background: #fff; border-left: 3px solid var(--accent); padding: 10px; font-size: 0.9rem; display: none; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .clue-box.extra { border-left-color: var(--safe); }
    .clue-box.visible { display: block; animation: slideIn 0.4s; }
    @keyframes slideIn { from {opacity:0; transform:translateX(-10px);} to {opacity:1;} }

    /* ДОКУМЕНТЫ */
    .doc-container { background: #fcfbf9; padding: 20px; border: 1px solid #ccc; box-shadow: 1px 1px 5px rgba(0,0,0,0.1); margin: 15px 0; position: relative; font-family: var(--ui-font); font-size: 0.85rem; }
    .doc-container pre { white-space: pre-wrap; font-family: inherit; margin: 10px 0; }

    .doc-stamp-area { margin-top: 15px; padding-top: 15px; border-top: 1px dashed #aaa; display: flex; justify-content: space-between; align-items: center; }
    .stamp-btn { background: transparent; border: 2px solid #555; color: #555; padding: 8px 16px; font-weight: bold; text-transform: uppercase; cursor: pointer; font-family: var(--ui-font); transition: all 0.2s; }
    .stamp-btn:hover { background: #eee; }
    .stamp-btn.risk { border-color: var(--accent); color: var(--accent); }
    .stamp-btn.safe { border-color: var(--safe); color: var(--safe); }

    .stamp-print { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-15deg) scale(2); font-size: 3rem; font-weight: 900; text-transform: uppercase; border: 6px double; padding: 10px 20px; opacity: 0; pointer-events: none; transition: all 0.2s ease-in; z-index: 10; }
    .stamp-print.active { opacity: 0.7; transform: translate(-50%, -50%) rotate(-15deg) scale(1); }
    .stamp-print.risk { color: var(--accent); border-color: var(--accent); }
    .stamp-print.safe { color: var(--safe); border-color: var(--safe); }

    /* ТЕОРИЯ */
    .theory-box { background: #3d342b; color: #e3dcd2; padding: 20px; border-radius: 4px; border-left: 5px solid var(--highlight); margin: 20px 0; font-size: 0.95rem; }
    .theory-box h3 { margin-top: 0; color: var(--highlight); font-family: var(--ui-font); text-transform: uppercase; font-size: 1.1rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; }

    /* ДОПРОС */
    .chat-bubble { background: #fff; padding: 10px 15px; border-radius: 12px 12px 12px 0; margin-bottom: 10px; position: relative; box-shadow: 0 1px 3px rgba(0,0,0,0.1); width: fit-content; max-width: 90%; }
    .chat-bubble.hero { background: #e1e8ed; margin-left: auto; border-radius: 12px 12px 0 12px; }
    .chat-name { font-size: 0.7rem; color: #888; text-transform: uppercase; margin-bottom: 2px; }
    .choice-grid { display: grid; gap: 8px; margin-top: 10px; }
    .choice-btn { background: var(--ink); color: #fff; border: none; padding: 12px; text-align: left; font-family: var(--ui-font); font-size: 0.85rem; cursor: pointer; transition: background 0.2s; }
    .choice-btn:hover { background: #444; }

    /* ДОСКА */
    .board-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; background: #3a322b; padding: 10px; border-radius: 4px; }
    .pin { background: #eaddcf; padding: 8px; font-size: 0.75rem; text-align: center; cursor: pointer; border: 2px solid transparent; opacity: 0.7; transition: all 0.2s; }
    .pin:hover { opacity: 1; }
    .pin.selected { border-color: var(--accent); background: #fff; opacity: 1; position: relative; }
    .pin.selected::after { content: ""; position: absolute; top: -5px; left: 50%; transform: translateX(-50%); width: 8px; height: 8px; background: var(--accent); border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.5); }

    /* ПОДСВЕТКА ОШИБОК НА ДОСКЕ */
    .pin.reveal-correct { border: 2px solid var(--safe) !important; color: var(--safe); font-weight: bold; background: #e6f5ea; opacity: 1; }
    .pin.reveal-wrong { border: 2px solid var(--accent) !important; color: var(--accent); text-decoration: line-through; background: #ffeaea; opacity: 1; }
    .pin.reveal-wrong::after { background: var(--accent); }
    .pin.reveal-correct::after { background: var(--safe); }

    /* КНОПКА ДАЛЕЕ */
    .next-btn { display: block; width: 100%; background: var(--ink); color: #fff; border: none; padding: 15px; font-family: var(--ui-font); text-transform: uppercase; font-weight: bold; margin-top: 20px; cursor: pointer; letter-spacing: 1px; }
    .next-btn:disabled { background: #999; cursor: not-allowed; opacity: 0.7; }

    /* ФИНАЛ: РЕЗУЛЬТАТЫ */
    .results-container {
        padding: 20px 0;
        border-bottom: 1px solid rgba(0,0,0,0.1);
        margin-bottom: 30px;
    }
    .score-row { display: flex; gap: 10px; margin-top: 10px; }
    .score-card { flex: 1; background: #fff; padding: 15px; text-align: center; border: 1px solid #ccc; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .score-val { font-size: 1.8rem; font-weight: bold; font-family: var(--ui-font); color: var(--accent); margin-top: 5px;}

    /* ТИЗЕР (СЛЕД СЕРИЯ) - ЧЕРНЫЙ ФОН */
    .teaser-block {
      background: #0a0908;
      color: #e3dcd2;
      padding: 25px;
      margin: 30px 0;
      border: 1px solid #333;
      text-align: left;
      position: relative;
    }
    .teaser-block h3 { margin: 0 0 10px 0; font-family: var(--ui-font); color: #666; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; text-align: center; }
    .teaser-title { font-size: 1.2rem; font-weight: bold; display: block; margin-bottom: 8px; color: var(--highlight); text-align: center; }
    .teaser-desc { font-size: 0.9rem; line-height: 1.5; color: #ccc; margin: 15px 0; }

    .max-avatar {
        float: left;
        width: 90px;
        height: 90px;
        margin-right: 15px;
        background: #fff;
        border-radius: 50%;
        border: 2px solid #fff;
        overflow: hidden;
    }
    .max-avatar img { width: 100%; height: 100%; object-fit: cover; }

    /* АВТОРСКИЙ БЛОК (ВИЗИТКА) */
    .author-footer {
        margin-top: auto;
        background: var(--paper-dark);
        color: var(--ink);
        padding: 25px;
        position: relative;
        margin-left: -25px; margin-right: -25px; margin-bottom: -25px;
        border-top: 2px solid var(--ink);
    }
    .author-badge {
        position: absolute; top: -12px; right: 20px;
        background: var(--ink); color: #fff;
        padding: 4px 10px; font-family: var(--ui-font);
        font-size: 0.75rem; font-weight: bold; transform: rotate(2deg);
    }
    .author-content { display: flex; align-items: flex-start; gap: 20px; }

    .author-avatar {
        width: 150px;
        height: 150px;
        border: 1px solid rgba(0,0,0,0.2);
        background: #fff;
        padding: 5px;
        flex-shrink: 0;
        box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        overflow: hidden;
    }
    .author-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center top;
    }

    .author-text h4 { margin: 0 0 5px 0; font-family: var(--ui-font); font-size: 1.1rem; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 1px solid rgba(0,0,0,0.1); padding-bottom: 5px; }
    .author-text .role { color: var(--accent); font-size: 0.75rem; font-weight: bold; text-transform: uppercase; display: block; margin-bottom: 8px; }
    .author-text p { font-size: 0.85rem; margin: 0 0 10px 0; line-height: 1.5; color: #333; }

    /* КНОПКА TELEGRAM */
    .author-link {
        display: inline-block;
        margin-top: 10px;
        color: #fff;
        text-decoration: none;
        font-weight: bold;
        font-size: 0.8rem; font-family: var(--ui-font);
        background: var(--accent);
        padding: 8px 12px;
        border-radius: 4px;
        transition: all 0.2s ease;
    }
    .author-link:hover {
        background: var(--paper);
        color: var(--accent);
        border: 1px solid var(--accent);
    }

    /* ЭКРАН ПРОВАЛА */
    #fail-screen { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:200; flex-direction:column; justify-content:center; align-items:center; text-align:center; color:var(--accent); }

    @media (max-width: 600px) {
      .header-stamp h1 { font-size: 1.4rem; }
      .board-grid { grid-template-columns: repeat(2, 1fr); }
      .author-content { flex-direction: column; text-align: center; align-items: center; }
      .author-avatar { width: 140px; height: 140px; }
    }
  </style>
</head>
<body>

<div class="noise-overlay"></div>
<div class="timer-bar"><div class="timer-fill" id="timerBar"></div></div>
<div class="timer-text" id="timerText">15:00</div>

<!-- ЭКРАН ПРОВАЛА -->
<div id="fail-screen">
  <h1 style="font-size:3rem; margin:0; font-family:var(--ui-font);">ВРЕМЯ ВЫШЛО</h1>
  <p style="color:#fff; font-family:var(--ui-font); max-width:400px; margin:20px;">Директор не стал ждать. Весь отдел уволен, утечка не расследована. Хакеры празднуют победу.</p>
  <button class="next-btn" style="width:200px; background:#fff; color:#000;" onclick="location.reload()">ПОПРОБОВАТЬ ЕЩЁ</button>
</div>

<div class="case-file">
  <div class="header-stamp">
    <div class="top-secret">КОНФИДЕНЦИАЛЬНО</div>
    <h1>ДЕЛО №13-82: «Вектор-Н»</h1>
    <div class="sub">ИНЦИДЕНТ: УТЕЧКА БАЗЫ ДАННЫХ (КЛАСС А)</div>
  </div>

  <!-- 0. ВВОДНАЯ С ЛЕГЕНДАМИ -->
  <div class="section active" id="sec-intro">
    <h2>Вводная</h2>
    <p><strong>Ситуация:</strong> Пятница, вечер. В офисе ООО «Вектор-Н» паника. База клиентов (5000+ записей с паспортами) утекла в даркнет. Директор рвет и мечет, дал вам 15 минут, чтобы найти виновного.</p>
    <div class="suspects-grid">
      <div class="suspect-card">
        <!-- ФОТО ЛОКАЛЬНО -->
        <img src="gregory.jpg" alt="Григорий">
        <div class="sus-role">СИСАДМИН</div>
        <div><strong>Григорий (28 лет)</strong></div>
        <div class="sus-bio">Интроверт, живет с мамой. Вечно жалуется на низкую ЗП. Последние месяцы выглядит подавленным, постоянно висит на телефоне.</div>
      </div>
      <div class="suspect-card">
        <!-- ФОТО ЛОКАЛЬНО -->
        <img src="elena.jpg" alt="Елена">
        <div class="sus-role">МЕНЕДЖЕР</div>
        <div><strong>Елена (34 года)</strong></div>
        <div class="sus-bio">Карьеристка, идет по головам. Любимица директора. Для неё выполнение KPI важнее правил безопасности и отношений с коллегами.</div>
      </div>
      <div class="suspect-card">
        <!-- ФОТО ЛОКАЛЬНО -->
        <img src="mikhail.jpg" alt="Михаил">
        <div class="sus-role">ГЛАВБУХ</div>
        <div><strong>Михаил (50 лет)</strong></div>
        <div class="sus-bio">Консерватор, ненавидит "все эти ваши компьютеры". Постоянно конфликтует с ИТ-отделом, пишет докладные на любой сбой.</div>
      </div>
    </div>
    <button class="next-btn" onclick="openSection('sec-desk')">>> НАЧАТЬ ОСМОТР</button>
  </div>

  <!-- 1. СТОЛ -->
  <div class="section" id="sec-desk">
    <h2>Рабочее место Григория</h2>
    <p>Кликайте на подозрительные объекты. <strong>4 улики обязательны</strong>, 5-я дополнительная (бонусная).</p>
    <div class="desk-view">
      <!-- СТОЛ -->
      <img src="desk.jpg" alt="Стол">
      <div class="hotspot" data-id="c1" style="left:21%; top:36%; width:33%; height:30%;" onclick="findClue('c1')"></div>
      <div class="hotspot" data-id="c2" style="left:0%; top:57%; width:20%; height:30%;" onclick="findClue('c2')"></div>
      <div class="hotspot" data-id="c3" style="left:52%; top:65%; width:25%; height:25%;" onclick="findClue('c3')"></div>
      <div class="hotspot" data-id="c4" style="left:82%; top:55%; width:15%; height:35%;" onclick="findClue('c4')"></div>
      <!-- Бонусная улика (Фото) -->
      <div class="hotspot" data-id="c5" style="left:66%; top:5%; width:23%; height:44%;" onclick="findClue('c5')"></div>
    </div>
    <div class="clues-grid" id="clues-area">
      <div class="clue-box" id="clue-c1"><strong>ФАКТ:</strong> Стикер «Пароль = 1982» на клавиатуре.<br><em>ВЫВОД:</em> Грубейшее нарушение. Пароль доступен любому прохожему.</div>
      <div class="clue-box" id="clue-c2"><strong>ФАКТ:</strong> Записка «Найти деньги до пятницы».<br><em>ВЫВОД:</em> Острый финансовый мотив. Кредиты, долги.</div>
      <div class="clue-box" id="clue-c3"><strong>ФАКТ:</strong> Блокнот: «23:00, Рюмочная, передать носитель».<br><em>ВЫВОД:</em> Планировалась встреча для передачи данных.</div>
      <div class="clue-box" id="clue-c4"><strong>ФАКТ:</strong> СМС от коллектора: «Время вышло».<br><em>ВЫВОД:</em> Сильное психологическое давление.</div>
      <div class="clue-box extra" id="clue-c5"><strong>ФАКТ (БОНУС):</strong> Фото с рыбалки (июль 1968).<br><em>ВЫВОД:</em> Личная деталь. Человек не робот, у него есть жизнь вне работы.</div>
    </div>
    <button class="next-btn" id="btn-desk-done" disabled onclick="openSection('sec-files')">>> ДАЛЕЕ: К ФАЙЛАМ</button>
  </div>

  <!-- 2. ФАЙЛЫ -->
  <div class="section" id="sec-files">
    <h2>Цифровой след</h2>
    <p>Анализ файлов. Ставьте штамп: <strong>НОРМА</strong> или <strong>УГРОЗА</strong>.</p>
    <!-- 1 -->
    <div class="doc-container" id="doc1">
      <div class="stamp-print" id="print1"></div>
      <strong>ФАЙЛ: План_маркетинг_ноябрь.txt</strong>
      <pre>СТРАТЕГИЯ ПРОДВИЖЕНИЯ
1. Контекст: "бетон оптом", "арматура Н.".
2. Бюджет: 50к руб.
3. Площадки: Авито, Яндекс.
Примечание: Согласовать макеты с Еленой до пятницы.</pre>
      <div class="doc-stamp-area">
        <button class="stamp-btn safe" onclick="stamp(1, 'safe')">НОРМА</button>
        <button class="stamp-btn risk" onclick="stamp(1, 'risk')">УГРОЗА</button>
      </div>
      <div class="feedback" id="fb1" style="display:none; margin-top:10px; font-style:italic;"></div>
    </div>
    <!-- 2 -->
    <div class="doc-container" id="doc2" style="display:none;">
      <div class="stamp-print" id="print2"></div>
      <strong>ФАЙЛ: ВСЕ_ПАРОЛИ.txt</strong>
      <pre>!!! НЕ УДАЛЯТЬ !!!
root: 123456
admin: admin
CRM: vector2020
Почта Елены: elena_boss / kisa1990
1С: qwerty</pre>
      <div class="doc-stamp-area">
        <button class="stamp-btn safe" onclick="stamp(2, 'safe')">НОРМА</button>
        <button class="stamp-btn risk" onclick="stamp(2, 'risk')">УГРОЗА</button>
      </div>
      <div class="feedback" id="fb2" style="display:none; margin-top:10px; font-style:italic;"></div>
    </div>
    <!-- 3 -->
    <div class="doc-container" id="doc3" style="display:none;">
      <div class="stamp-print" id="print3"></div>
      <strong>ФАЙЛ: Клиенты_БАЗА_ПОЛНАЯ.csv</strong>
      <pre>ID;ФИО;ПАСПОРТ;АДРЕС;ТЕЛЕФОН
101;Иванов И.И.;4500 123123;ул. Ленина 1;+7900...
102;Петров С.С.;4502 333222;ул. Мира 5;+7999...
[...еще 5000 записей...]</pre>
      <div class="doc-stamp-area">
        <button class="stamp-btn safe" onclick="stamp(3, 'safe')">НОРМА</button>
        <button class="stamp-btn risk" onclick="stamp(3, 'risk')">УГРОЗА</button>
      </div>
      <div class="feedback" id="fb3" style="display:none; margin-top:10px; font-style:italic;"></div>
    </div>
    <!-- 4 -->
    <div class="doc-container" id="doc4" style="display:none;">
      <div class="stamp-print" id="print4"></div>
      <strong>ФАЙЛ: Служебная_записка_Михаил.docx</strong>
      <pre>ОТ: Гл. Бухгалтер Михаил С.
КОМУ: Директору
Я требую провести аудит отдела ИТ. Григорий постоянно спит на рабочем месте, а сервера висят. Из-за сбоя мы потеряли проводку на 2 млн.</pre>
      <div class="doc-stamp-area">
        <button class="stamp-btn safe" onclick="stamp(4, 'safe')">НОРМА</button>
        <button class="stamp-btn risk" onclick="stamp(4, 'risk')">УГРОЗА</button>
      </div>
      <div class="feedback" id="fb4" style="display:none; margin-top:10px; font-style:italic;"></div>
    </div>
    <!-- 5 -->
    <div class="doc-container" id="doc5" style="display:none;">
      <div class="stamp-print" id="print5"></div>
      <strong>ФАЙЛ: Письмо Re: СРОЧНО!!!</strong>
      <pre>ОТ: Elena V.
КОМУ: Grigoriy P.
Гриша, хватит ломаться. Шеф орет, ему нужен отчет СЕЙЧАС.
Дай мне свой пароль от админки, я сама выгружу.
Или я пишу докладную. Решай.</pre>
      <div class="doc-stamp-area">
        <button class="stamp-btn safe" onclick="stamp(5, 'safe')">НОРМА</button>
        <button class="stamp-btn risk" onclick="stamp(5, 'risk')">УГРОЗА</button>
      </div>
      <div class="feedback" id="fb5" style="display:none; margin-top:10px; font-style:italic;"></div>
    </div>
    <button class="next-btn" id="btn-files-done" disabled onclick="openSection('sec-theory1')">>> ДАЛЕЕ: К ТЕОРИИ</button>
  </div>

  <!-- 3. ТЕОРИЯ 1 -->
  <div class="section" id="sec-theory1">
    <div class="theory-box">
      <h3>ТЕОРИЯ: Треугольник мошенничества</h3>
      <p>После просмотра стола и файлов видно: это не «таинственный хакер‑иностранец», а обычный офис с человеческими долгами, дедлайнами и очень слабой гигиеной безопасности.</p>
      <p>Это классический <strong>Треугольник Кресси</strong>:</p>
      <ul>
        <li><strong>Давление (Мотив).</strong> Кредиты, коллекторы, семейные расходы.</li>
        <li><strong>Возможность.</strong> Пароли в txt, база на рабочем столе, флешки без ограничений.</li>
        <li><strong>Оправдание.</strong> «Мне и так мало платят», «я только скопирую, ничего страшного».</li>
      </ul>
    </div>
    <button class="next-btn" onclick="openSection('sec-interrogation')">>> ПЕРЕЙТИ К ДОПРОСУ</button>
  </div>

  <!-- 4. ДОПРОС -->
  <div class="section" id="sec-interrogation">
    <h2>Допрос: Григорий</h2>
    <div id="chat-history">
      <div class="chat-bubble"><div class="chat-name">Григорий</div>Инспектор... Я ничего не делал. Я просто сидел, чинил базу 1С. Почему вы смотрите на меня как на преступника?</div>
    </div>
    <div class="choice-grid" id="chat-choices">
      <button class="choice-btn" onclick="chatStep1('hard')">«Хватит врать! Мы видели твои долги и СМС от коллекторов. Сколько тебе заплатили?» (Агрессия)</button>
      <button class="choice-btn" onclick="chatStep1('soft')">«Григорий, я знаю про твои проблемы с деньгами. Тебя заставили? Помоги мне — и я помогу тебе.» (Эмпатия)</button>
    </div>
  </div>

  <!-- 5. ТЕОРИЯ 2 -->
  <div class="section" id="sec-theory2">
    <div class="theory-box">
      <h3>ТЕОРИЯ: Социальная инженерия</h3>
      <p>Переписка с Еленой показывает знакомый сценарий: «шеф орёт», «нужно вчера», «дай пароль — потом разберёмся». Никаких сложных эксплойтов, только давление и иерархия.</p>
      <p>Это и есть <strong>социальная инженерия</strong>: использовать человеческий фактор вместо уязвимостей в коде.</p>
      <ul>
        <li><strong>Авторитет.</strong> «Директор ждёт отчёт». Человек боится ослушаться начальства.</li>
        <li><strong>Срочность.</strong> «Нужно прямо сейчас, иначе штраф». Мозг отключает критическое мышление в панике.</li>
        <li><strong>Страх.</strong> «Иначе напишу докладную». Шантаж — мощный стимул.</li>
      </ul>
      <p>В российских реалиях к этому добавляется «ну ты же свой, выручи». Но пароль остаётся личной подписью, а не общей кружкой на кухне.</p>
    </div>
    <button class="next-btn" onclick="openSection('sec-board')">>> К ВЫВОДАМ</button>
  </div>

  <!-- 6. ДОСКА -->
  <div class="section" id="sec-board">
    <h2>Финальная дедукция</h2>
    <p>Выберите <strong>ровно 5 причин</strong>, которые привели к утечке. <br><span style="font-size:0.8em; opacity:0.7;">(Выбирайте самые весомые факторы: технические, личные и организационные)</span></p>
    <div class="board-grid" id="deduction-board">
      <!-- ВЕРНЫЕ (5 шт) -->
      <div class="pin" onclick="togglePin(this, 'correct')">Финансовые проблемы (Долги)</div>
      <div class="pin" onclick="togglePin(this, 'correct')">Хранение паролей в открытом виде</div>
      <div class="pin" onclick="togglePin(this, 'correct')">Шантаж сотрудника</div>
      <div class="pin" onclick="togglePin(this, 'correct')">Добровольная передача данных</div>
      <div class="pin" onclick="togglePin(this, 'correct')">Отсутствие DLP-системы (Контроль выгрузки)</div>

      <!-- НЕВЕРНЫЕ -->
      <div class="pin" onclick="togglePin(this, 'wrong')">Отсутствие антивируса</div>
      <div class="pin" onclick="togglePin(this, 'wrong')">Взлом Wi-Fi сети</div>
      <div class="pin" onclick="togglePin(this, 'wrong')">Программная ошибка 1С</div>
      <div class="pin" onclick="togglePin(this, 'wrong')">Сговор с конкурентами</div>
    </div>
    <div id="board-error" style="color:var(--accent); display:none; margin-top:10px; font-weight:bold;">Выберите ровно 5 пунктов!</div>
    <button class="next-btn" onclick="checkAndFinish()">>> ЗАКРЫТЬ ДЕЛО</button>
  </div>

  <!-- 7. ФИНАЛ -->
  <div class="section" id="sec-final">
    <h2>ИТОГИ РАССЛЕДОВАНИЯ</h2>

    <!-- 1. РЕЗУЛЬТАТЫ ИГРЫ -->
    <div class="results-container">
        <div class="score-row">
          <div class="score-card"><div>БАЛЛЫ</div><div class="score-val" id="finalScoreVal">0/5</div></div>
          <div class="score-card"><div>ЗВАНИЕ</div><div class="score-val" id="finalRank">...</div></div>
        </div>
        <p style="margin-top:20px"><strong>Вердикт:</strong></p>
        <p id="finalText"></p>
        <div id="bonus-text" style="display:none; margin-top:15px; border-top:1px dashed #aaa; padding-top:10px; font-style:italic; color:#555;"></div>
    </div>

    <!-- 2. ТИЗЕР: ИСТОРИЯ МАКСА (ЧЕРНЫЙ ФОН) -->
    <div class="teaser-block">
        <h3>СЛЕДУЮЩИЙ ЭПИЗОД</h3>
        <span class="teaser-title">ЭПИЗОД 2: «ВРЕМЯ, КОТОРОГО НЕТ»</span>
        <div class="teaser-desc">
            <div class="max-avatar">
              <!-- ФОТО ЛОКАЛЬНО -->
              <img src="max.jpg" alt="Макс">
            </div>
            Макс — обычный офисный клерк. Он не умеет говорить "нет", помогает всем отделам и никогда не уходит вовремя.
            <br><br>
            У Макса 100 задач, ноль результатов и дергающийся глаз. Ваша задача: спасти его карьеру (и нервную систему), жестко расставив приоритеты по Матрице Эйзенхауэра.
            <div style="clear:both;"></div>
        </div>
        <button class="next-btn" style="background:#333; color:#fff; border:1px solid #555; margin-top:15px; cursor:default; font-size:0.8rem;">В РАЗРАБОТКЕ...</button>
    </div>

    <!-- 3. КАРТОЧКА АВТОРА (ОБНОВЛЕННАЯ) -->
    <div class="author-footer">
        <div class="author-badge">АВТОР ПРОЕКТА</div>
        <div class="author-content">
            <div class="author-avatar">
                <!-- ФОТО ЛОКАЛЬНО -->
                <img src="olga.jpg" alt="Ольга Ковальчук">
            </div>
            <div class="author-text">
                <span class="role">E-LEARNING DEVELOPER</span>
                <h4>Ольга Ковальчук</h4>
                <p>Создаю интерактивные форматы, которые вовлекают с первой минуты. Объединяю сторителлинг и практику, чтобы обучение было не только полезным, но и захватывающим.</p>
                <a href="https://t.me/okcrazyart" target="_blank" class="author-link">Связаться со мной в Telegram &rarr;</a>
            </div>
        </div>
    </div>

  </div>
</div>

<script>
  // ТАЙМЕР
  let timeLeft = 15 * 60;
  let timerRunning = true;
  const timerEl = document.getElementById('timerText');
  const barEl = document.getElementById('timerBar');

  const timerInterval = setInterval(() => {
    if(!timerRunning) return;
    timeLeft--;
    let m = Math.floor(timeLeft / 60);
    let s = timeLeft % 60;
    timerEl.innerText = `${m}:${s<10?'0'+s:s}`;
    barEl.style.width = (timeLeft / (15*60) * 100) + "%";

    if(timeLeft <= 0) {
      clearInterval(timerInterval);
      document.getElementById('fail-screen').style.display = 'flex';
    }
  }, 1000);

  function openSection(id) {
    const el = document.getElementById(id);
    el.classList.add('active');
    setTimeout(() => el.scrollIntoView({behavior: 'smooth', block: 'start'}), 100);
  }

  // УЛИКИ
  let cluesFound = 0;
  let bonusFound = false;
  function findClue(id) {
    const el = document.querySelector(`.hotspot[data-id="${id}"]`);
    if (el.classList.contains('found')) return;
    el.classList.add('found');
    document.getElementById('clue-'+id).classList.add('visible');
    if(id === 'c5') { bonusFound = true; } else { cluesFound++; }
    if (cluesFound >= 4) document.getElementById('btn-desk-done').disabled = false;
  }

  // ДОКУМЕНТЫ
  let docsDone = 0;
  const docData = {
    1: { ans:'safe', msg:'Верно. Стандартный рабочий файл, не содержит критических данных.' },
    2: { ans:'risk', msg:'Верно! Грубейшее нарушение: пароли администратора хранятся в открытом текстовом файле.' },
    3: { ans:'risk', msg:'Верно! База с персональными данными (ПДн) лежит на рабочем столе — это прямая угроза утечки.' },
    4: { ans:'safe', msg:'Верно. Это внутренний конфликт отделов, к информационной безопасности отношения не имеет.' },
    5: { ans:'risk', msg:'Верно! Принуждение к передаче пароля через шантаж — это социальная инженерия.' }
  };
  function stamp(id, choice) {
    const container = document.getElementById('doc'+id);
    const print = document.getElementById('print'+id);
    const fb = document.getElementById('fb'+id);
    container.querySelectorAll('button').forEach(b => b.disabled = true);
    print.classList.add('active');
    print.innerText = choice==='risk' ? "УГРОЗА" : "НОРМА";
    print.classList.add(choice);
    fb.style.display = 'block';
    if (choice === docData[id].ans) { fb.innerHTML = `<span style='color:var(--safe)'>✔ ${docData[id].msg}</span>`; }
    else { fb.innerHTML = `<span style='color:var(--accent)'>✖ Ошибка.</span>`; timeLeft -= 30; }
    docsDone++;
    if (docsDone < 5) { setTimeout(() => document.getElementById('doc'+(id+1)).style.display = 'block', 600); }
    else { document.getElementById('btn-files-done').disabled = false; }
  }

  // ДОПРОС
  function chatStep1(mode) {
    const hist = document.getElementById('chat-history');
    const box = document.getElementById('chat-choices');
    box.innerHTML = '';

    if (mode === 'hard') {
      hist.innerHTML += `<div class="chat-bubble hero">Вы: Хватит врать! Мы видели твои долги и СМС от коллекторов. Сколько тебе заплатили?</div>`;
      setTimeout(() => {
        hist.innerHTML += `<div class="chat-bubble"><div class="chat-name">Григорий</div>(Испуганно) Я... я не брал денег! Клянусь! У меня долги, да, но я не продавал базу!</div>`;
        setTimeout(() => {
           box.innerHTML = `<button class="choice-btn" onclick="chatStep2('proof')">«А это что? (Показать письмо Елены)»</button><button class="choice-btn" onclick="chatStep2('press')">«Не усугубляй. Признание смягчит наказание.»</button>`;
        }, 1000);
      }, 1000);
    } else {
      hist.innerHTML += `<div class="chat-bubble hero">Вы: Я знаю про коллекторов. Тебя заставили?</div>`;
      setTimeout(() => {
        hist.innerHTML += `<div class="chat-bubble"><div class="chat-name">Григорий</div>(Опускает глаза) Вы не понимаете... Они звонят мне каждый час. Угрожают семье. Я был в отчаянии.</div>`;
        setTimeout(() => {
           box.innerHTML = `<button class="choice-btn" onclick="chatStep2('Elena')">«Это Елена потребовала доступ?»</button>`;
        }, 1000);
      }, 1000);
    }
  }

  function chatStep2(variant) {
    const hist = document.getElementById('chat-history');
    const box = document.getElementById('chat-choices');
    box.innerHTML = '';

    if (variant === 'proof' || variant === 'press') {
      hist.innerHTML += `<div class="chat-bubble hero">Вы: Говори правду. У нас есть переписка.</div>`;
    } else {
      hist.innerHTML += `<div class="chat-bubble hero">Вы: Это была Елена? Скажи, и мы защитим тебя от давления.</div>`;
    }

    setTimeout(() => {
      hist.innerHTML += `<div class="chat-bubble"><div class="chat-name">Григорий</div>Ладно! Да! Елена пришла, орала, что шеф уволит меня без выходного пособия... Я написал ей пароль на стикере, она его забрала.</div>`;
      finishChat();
    }, 1200);
  }

  function finishChat(){
    document.getElementById('chat-choices').innerHTML = `<button class="choice-btn" style="background:var(--safe); text-align:center;" onclick="openSection('sec-theory2')">>> ПОКАЗАНИЯ ЗАПИСАНЫ. ДАЛЕЕ</button>`;
  }

  // ДОСКА
  function togglePin(el, type) {
    if(el.classList.contains('reveal-correct') || el.classList.contains('reveal-wrong')) return;
    if (el.classList.contains('selected')) { el.classList.remove('selected'); return; }
    const selected = document.querySelectorAll('.pin.selected').length;
    if (selected >= 5) return;
    el.classList.add('selected');
    el.dataset.type = type;
  }

  function checkAndFinish() {
    if (document.querySelectorAll('.pin.selected').length !== 5) {
        document.getElementById('board-error').style.display = 'block';
        return;
    }
    finishGame();
  }

  function finishGame() {
    timerRunning = false;
    document.getElementById('timerBar').style.background = 'var(--safe)';
    document.getElementById('timerText').style.borderColor = 'var(--safe)';
    document.getElementById('timerText').style.color = 'var(--safe)';

    // ПОДСВЕТКА
    const allPins = document.querySelectorAll('.pin');
    let correctCount = 0;

    allPins.forEach(p => {
        const isSelected = p.classList.contains('selected');
        if (p.onclick.toString().includes("'correct'")) {
            p.classList.add('reveal-correct');
            if(isSelected) correctCount++;
        } else if (isSelected) {
            p.classList.add('reveal-wrong');
        }
    });

    openSection('sec-final');

    let timeBonus = timeLeft > 300;
    let finalScore = correctCount;

    document.getElementById('finalScoreVal').innerText = `${finalScore}/5`;
    let rank = "Стажёр";
    let txt = "Вы упустили суть. Посмотрите на доску выше — зеленым отмечено то, что действительно привело к утечке.";

    if (finalScore === 5) { rank = "Легенда ИБ"; txt = "Абсолютно точно! Вы вскрыли все слои проблемы."; }
    else if (finalScore === 4) { rank = "Старший следователь"; txt = "Почти идеально. Вы допустили одну ошибку (см. красную карточку на доске)."; }
    else if (finalScore === 3) { rank = "Оперативник"; txt = "Вы нашли основные причины, но отвлеклись на ложные следы."; }

    document.getElementById('finalRank').innerText = rank;
    const textEl = document.getElementById('finalText');
    textEl.innerHTML = txt;

    if(timeBonus) {
      const bonusDiv = document.createElement('div');
      bonusDiv.style.marginTop = '15px';
      bonusDiv.style.padding = '10px';
      bonusDiv.style.background = 'rgba(42, 122, 75, 0.1)';
      bonusDiv.style.border = '1px solid var(--safe)';
      bonusDiv.style.color = 'var(--safe)';
      bonusDiv.style.fontWeight = 'bold';
      bonusDiv.innerHTML = `⚡ БОНУС ЗА СКОРОСТЬ: Вы уложились с запасом! (+ К репутации)`;
      textEl.after(bonusDiv);
    }

    if(bonusFound){
      document.getElementById('bonus-text').style.display = 'block';
      document.getElementById('bonus-text').innerText = "P.S. Вы заметили фото с рыбалки. Внимание к деталям — признак профи.";
    }

    const finalDiv = document.getElementById('sec-final');
    finalDiv.querySelectorAll('.final-controls').forEach(b => b.remove());
  }
</script>
</body>
</html>
